package ru.sushi.delivery.kds.dto;

import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

import jakarta.validation.constraints.NotBlank;

/**
 * Запрос на создание заказа из текста (импорт).
 * Текст парсится тем же парсером, что и в UI.
 *
 * Парсер рассчитан на форматы из мессенджеров (Starter, Яндекс и т.п.). Для произвольного текста
 * нужно соблюдать формат позиций:
 *
 * <ul>
 *   <li>Позиции: <b>2 х Филадельфия</b>, <b>1 х Сет Дракон</b> (обязательно «х» или «×» между числом и названием)</li>
 *   <li>Позиции «2 Филадельфия» без «х» не распознаются</li>
 *   <li>Комментарий: только если есть префикс «Комментарий:» или «Коммент:»</li>
 *   <li>Адрес: лучше указывать с префиксом «Адрес доставки —» или «Доставка:»</li>
 * </ul>
 *
 * Хорошо распознаются: город (Парнас/Ухта), телефон (+7...), тип (Доставка/С собой),
 * время («К 18:30», «Доставить к 18:30»).
 *
 * Пример текста:
 * "Доставка. К 18:30. 2 х Филадельфия, 1 х Сет Дракон. Ухта. Адрес доставки — ул. Мира 5, кв. 10. +79001234567. Комментарий: без лука"
 */
@Data
@NoArgsConstructor
@AllArgsConstructor
public class ImportOrderRequest {

    /**
     * Текст заказа для парсинга (обязательно).
     */
    @NotBlank(message = "text обязателен")
    private String text;

    /**
     * Город: PARNAS или UKHTA. Если не указан — берётся из текста (Парнас/Ухта).
     */
    private String city;

    /**
     * Номер заказа. Если не указан — берётся из текста или генерируется (API-...).
     */
    private String orderNumber;
}
